# ElementHider — 改善案

### 1. ページロード時のちらつき防止

**課題**
現在は JavaScript が実行されてから `display: none` を適用するため、ページ読み込み直後に非表示要素が一瞬表示される。

**解決策**
`chrome.scripting.insertCSS` を使い、JS より先に CSS を注入する。または `background.ts` から `declarativeNetRequest` でページ読み込み前にスタイルを挿入する。

### 2. 一括表示/非表示の切り替え

**概要**
ポップアップ上部に「全て非表示」「全て表示」ボタンを追加し、ワンクリックで全管理要素を一括切り替えできる。

**実装メモ**
- 右クリックメニューでのトグルも追加
- `managedElements.every(e => e.isHidden)` で現在の状態を判断し、トグルボタンにしても良い
- 全件に対して `SHOW_ELEMENT` / `HIDE_ELEMENT` メッセージを送信し、ストレージを一括更新する

### 3. サイト横断ビュー

**概要**
全サイト分の管理要素を一覧できる画面。不要なサイトのデータをまとめて削除できる。

### 4. 要素のラベル編集

**概要**
自動生成されたラベルをユーザーが後から変更できる。要素が多い場合に管理しやすくなる。

### 5. キーボードショートカット

**概要**
`chrome.commands` API を使い、ピッカーの起動をキーボードで行えるようにする。

### 6. インポート / エクスポート

**概要**
設定全体を JSON ファイルとして保存・読み込みできる。別のブラウザや端末への移行に便利。

**実装**
ポップアップの設定画面から `chrome.storage.local.get(null)` の結果を Blob としてダウンロード。読み込みは `FileReader` でパースして `chrome.storage.local.set`。